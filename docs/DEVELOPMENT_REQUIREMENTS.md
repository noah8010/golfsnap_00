# GolfSnap - 개발 요구사항 보완 기획서

> **문서 버전**: v1.0
> **작성일**: 2026-02-09
> **관련 문서**: [PAGE_SPECIFICATION.md](./PAGE_SPECIFICATION.md) (페이지별 기능 명세)
> **프로토타입**: https://noah8010.github.io/golfsnap_00/
> **대상 독자**: 프론트엔드/백엔드 개발자

---

## 문서 목적

이 문서는 [PAGE_SPECIFICATION.md](./PAGE_SPECIFICATION.md)에서 `[TBD]`로 표기된 항목과 미기재된 요구사항을 보완합니다.

**표기 규칙:**

| 표기 | 의미 |
|------|------|
| **[확정]** | 기획에서 결정한 사항. 그대로 구현 |
| **[개발 제안]** | 기획에서 방향만 제시하고, 최종 기술 선택은 개발팀에 위임 |
| **[협의 필요]** | 기획과 개발이 함께 결정해야 하는 사항 |

---

## 목차

1. [확정 사항 (TBD 해소)](#1-확정-사항)
2. [회원가입 및 로그인](#2-회원가입-및-로그인)
3. [미디어 업로드](#3-미디어-업로드)
4. [촬영하기](#4-촬영하기)
5. [영상 렌더링 (클라이언트)](#5-영상-렌더링)
6. [공유 기능](#6-공유-기능)
7. [미구현 화면 기획 방향](#7-미구현-화면-기획-방향)
8. [디자인 시스템](#8-디자인-시스템)
9. [화면 전환 애니메이션](#9-화면-전환-애니메이션)
10. [네트워크 및 성능](#10-네트워크-및-성능)
11. [비즈니스 규칙](#11-비즈니스-규칙)
12. [API 상세 요구사항](#12-api-상세-요구사항)
13. [개발자 결정 필요 사항 종합](#13-개발자-결정-필요-사항-종합)

---

## 1. 확정 사항

PAGE_SPECIFICATION.md의 `[TBD]` 항목 중 기획에서 확정한 내용입니다.

### 1.1 영상 렌더링 방식 [확정]

| 항목 | 확정 내용 |
|------|----------|
| 렌더링 위치 | **클라이언트(모바일 기기)에서 처리** |
| 서버 역할 | 렌더링 없음. 미디어 저장/서빙, 프로젝트 데이터 관리만 담당 |

> **[개발 제안]** 클라이언트 렌더링 기술은 WebCodecs API, FFmpeg.wasm 등 개발팀에서 타겟 브라우저 호환성과 성능을 고려하여 선택해 주세요.

**기획 의도:**
- 서버 렌더링 비용을 없애고, 사용자 기기에서 바로 결과물을 생성
- 내보내기(P6) 진행률은 실제 클라이언트 처리 진행률을 표시
- 렌더링 중 앱을 벗어나면 중단되어도 무방 (재시작 가능)

### 1.2 미디어 제약 조건 [확정]

| 항목 | 확정값 | 비고 |
|------|--------|------|
| 업로드 가능 포맷 | MP4, MOV, WEBM, JPG, PNG, HEIC | |
| 단일 파일 최대 크기 | **500MB** | |
| 영상 최대 길이 | **10분** | |
| 영상 최대 해상도 | 3840x2160 (4K) | |
| 프로젝트당 최대 미디어 수 | **20개** | |
| 프로젝트 최대 타임라인 길이 | **5분** | 총 클립 합산 기준 |
| 트랙별 최대 클립 수 | **제한 없음** | 성능 이슈 발생 시 개발팀과 협의하여 조정 |
| 사용자당 최대 프로젝트 수 | **50개** | |
| 사용자당 총 스토리지 용량 | **5GB** | 1차 출시 기준, 추후 요금제 도입 시 변경 가능 |

### 1.3 텍스트/스티커 기본값 [확정]

| 항목 | 확정값 |
|------|--------|
| 텍스트 최대 길이 | 200자 |
| 텍스트 클립 기본 길이 | 5초 |
| 스티커 클립 기본 길이 | 3초 |
| 프로젝트명 최대 길이 | 50자 |

### 1.4 영상 재생 [확정]

| 항목 | 확정 내용 |
|------|----------|
| 재생 방식 | HTML5 `<video>` 태그 사용 |
| HLS 지원 | 불필요 (원본 파일 직접 재생) |
| 전체화면 | Fullscreen API 사용 (`element.requestFullscreen()`) |

> **[개발 제안]** HLS 스트리밍 없이 원본 파일을 직접 재생합니다. 단, 대용량 파일의 모바일 재생 성능이 문제될 경우 서버에서 프록시 해상도(720p) 파일을 별도 생성하는 방안을 검토해 주세요.

---

## 2. 회원가입 및 로그인

> PAGE_SPECIFICATION.md 3.1절의 `[TBD]` 보완

### 2.1 인증 방식 [확정]

**소셜 로그인만 지원합니다.** 자체 회원가입(이메일/비밀번호)은 1차 출시에서 제외합니다.

| 소셜 제공자 | 우선순위 | 비고 |
|------------|---------|------|
| **카카오** | 필수 | 국내 사용자 대다수 |
| **네이버** | 필수 | 국내 사용자 |
| **구글** | 선택 | 해외 사용자 대비 |
| 애플 | 선택 | iOS App Store 정책상 앱 래핑 시 필수 |

> **[개발 제안]** OAuth 2.0 기반 소셜 로그인 구현 시, 토큰 관리 방식(JWT, 세션 등)과 리프레시 토큰 전략은 개발팀에서 보안 요구사항에 맞게 선택해 주세요.

### 2.2 로그인 화면

```
┌────────────────────────────────────┐
│                                    │
│          [GolfSnap 로고]            │
│                                    │
│     스크린골프 영상을 더 멋지게       │
│                                    │
│   ┌──────────────────────────┐    │
│   │  🟡  카카오로 시작하기      │    │  노란 배경
│   └──────────────────────────┘    │
│   ┌──────────────────────────┐    │
│   │  🟢  네이버로 시작하기      │    │  초록 배경
│   └──────────────────────────┘    │
│   ┌──────────────────────────┐    │
│   │  ⚪  Google로 시작하기     │    │  흰색 배경
│   └──────────────────────────┘    │
│                                    │
│   로그인 시 서비스 이용약관 및        │
│   개인정보 처리방침에 동의합니다      │
│                                    │
└────────────────────────────────────┘
```

### 2.3 로그인 플로우

```
[앱 진입]
    │
    ├─ 유효한 세션 있음 → [대시보드(P1)]
    │
    └─ 세션 없음 → [로그인 화면]
                        │
                   소셜 로그인 버튼 탭
                        │
                   소셜 인증 페이지 (외부)
                        │
                   ┌────┴────┐
                   │         │
               인증 성공   인증 실패/취소
                   │         │
              신규 사용자?    "로그인에 실패했습니다" (error 토스트)
               │       │     로그인 화면 유지
            예(최초)   아니오
               │       │
         [프로필 설정]  [대시보드(P1)]
               │
          [대시보드(P1)]
```

### 2.4 최초 프로필 설정 화면

신규 사용자에게만 1회 표시됩니다.

```
┌────────────────────────────────────┐
│ 프로필 설정                    건너뛰기│
├────────────────────────────────────┤
│                                    │
│        [프로필 사진 영역]           │
│         📷 사진 변경               │
│                                    │
│  닉네임 *                          │
│  ┌──────────────────────────┐    │
│  │ (소셜 프로필 이름 기본값)    │    │
│  └──────────────────────────┘    │
│                                    │
│  한줄 소개                         │
│  ┌──────────────────────────┐    │
│  │ (선택 입력)                │    │
│  └──────────────────────────┘    │
│                                    │
│  ┌──────────────────────────┐    │
│  │        시작하기             │    │
│  └──────────────────────────┘    │
└────────────────────────────────────┘
```

| 필드 | 규칙 |
|------|------|
| 프로필 사진 | 소셜 프로필 사진 기본값, 변경 가능 (JPG/PNG, 최대 5MB) |
| 닉네임 | 필수, 2~20자, 특수문자 제한 (한글/영문/숫자/언더스코어만) |
| 한줄 소개 | 선택, 최대 50자 |
| "건너뛰기" | 소셜 프로필 이름으로 자동 설정, 대시보드로 이동 |

### 2.5 세션 관리 요구사항

| 항목 | 요구사항 |
|------|---------|
| 자동 로그인 | 앱 재진입 시 유효한 세션이 있으면 자동 로그인 |
| 세션 만료 시 | 편집 중이었다면 현재 프로젝트를 서버에 저장 시도 → 로그인 화면 이동 → 재로그인 후 이전 화면 복귀 |
| 로그아웃 | 프로필 화면에 "로그아웃" 버튼 → 확인 다이얼로그 → 로그인 화면으로 이동 |

> **[개발 제안]** 세션 유효 기간, 리프레시 토큰 만료 정책은 개발팀에서 보안 수준에 맞게 결정해 주세요. 기획에서는 "2주 이상 미접속 시에만 재로그인"을 희망합니다.

---

## 3. 미디어 업로드

> PAGE_SPECIFICATION.md P3(미디어 선택)에서 "서버 API에서 미디어 목록 조회"라고 기재되어 있으나, **미디어를 서버에 올리는 플로우**가 누락되어 있습니다.

### 3.1 업로드 진입점

| 진입 경로 | 동작 |
|----------|------|
| 대시보드 "영상 업로드" 버튼 | 기기 파일 선택기 → 업로드 → 미디어 선택(P3)으로 이동 |
| 미디어 선택(P3) 화면 내 "업로드" 버튼 | 기기 파일 선택기 → 업로드 → 목록에 즉시 반영 |

### 3.2 업로드 플로우

```
[파일 선택기] (기기 갤러리/파일)
      │
 파일 선택 (복수 선택 가능, 최대 5개 동시)
      │
 ┌────┴────────────────┐
 │  유효성 검사          │
 │  - 포맷 확인          │
 │  - 크기 확인 (≤500MB) │
 │  - 영상 길이 (≤10분)  │
 │  - 잔여 용량 확인     │
 └────┬────────────────┘
      │
  ┌───┴───┐
  │       │
 통과    실패
  │       │
 업로드   에러 토스트 (아래 표 참조)
  │
 [업로드 진행 UI]
  │
 완료 → 미디어 목록에 반영
```

### 3.3 업로드 진행 UI

미디어 선택(P3) 화면 상단에 업로드 상태 바를 표시합니다.

```
┌────────────────────────────────────┐
│ 📤 업로드 중... 2/3              ✕ │  상단 업로드 상태 바
│ ████████████░░░░░░░░  67%         │
├────────────────────────────────────┤
│ (기존 미디어 목록)                   │
└────────────────────────────────────┘
```

| 상태 | 표시 |
|------|------|
| 업로드 대기 | "업로드 준비 중..." |
| 업로드 중 | "업로드 중... N/M" + 프로그레스 바 |
| 개별 파일 완료 | 목록에 즉시 추가 (낙관적 업데이트) |
| 전체 완료 | 상태 바 자동 사라짐 + "N개 업로드 완료" (success 토스트) |
| 개별 파일 실패 | "파일명 업로드 실패" (error 토스트), 나머지 계속 진행 |
| ✕ 취소 | 진행 중인 업로드 중단, 이미 완료된 파일은 유지 |

### 3.4 업로드 유효성 에러 메시지

| 상황 | 토스트 메시지 | 타입 |
|------|-------------|------|
| 지원하지 않는 포맷 | "지원하지 않는 파일 형식입니다 (MP4, MOV, WEBM, JPG, PNG, HEIC만 가능)" | warning |
| 파일 크기 초과 | "파일 크기가 너무 큽니다 (최대 500MB)" | warning |
| 영상 길이 초과 | "영상 길이가 너무 깁니다 (최대 10분)" | warning |
| 스토리지 용량 초과 | "저장 공간이 부족합니다 (N.NGB / 5GB 사용 중)" | error |
| 동시 업로드 초과 | "한 번에 최대 5개까지 업로드할 수 있습니다" | warning |

### 3.5 썸네일 생성 [개발 제안]

> **[개발 제안]** 업로드된 미디어의 썸네일 생성 방식(서버 FFmpeg, 클라이언트 Canvas 등)은 개발팀에서 성능과 비용을 고려하여 선택해 주세요.

**기획 요구사항:**
- 영상: 첫 번째 프레임 또는 1초 시점의 프레임
- 이미지: 리사이즈 (짧은 변 기준 256px)
- 썸네일 포맷: JPEG (품질 80%)
- 미디어 선택(P3) 그리드에서 사용

### 3.6 HEIC 파일 처리 [개발 제안]

> **[개발 제안]** HEIC 파일(iPhone 촬영 사진)은 브라우저 호환성이 제한적입니다. 서버에서 JPEG로 변환하여 저장하는 것을 권장하며, 변환 시점과 방식은 개발팀에서 결정해 주세요.

---

## 4. 촬영하기

> PAGE_SPECIFICATION.md P1 대시보드의 "촬영하기" 버튼 `[TBD]` 보완

### 4.1 촬영 방식 [확정]

**기기 기본 카메라 앱을 호출합니다.** 앱 내 자체 카메라 UI는 1차 출시에서 구현하지 않습니다.

```
[촬영하기 버튼 탭]
      │
 <input type="file" accept="video/*" capture="environment">
      │
 기기 카메라 앱 실행
      │
 ┌────┴────┐
 │         │
촬영 완료   취소
 │         │
자동 업로드  아무 동작 없음
 │
업로드 완료 → 미디어 선택(P3)으로 이동 (해당 영상 자동 선택)
```

### 4.2 촬영 제약

| 항목 | 규칙 |
|------|------|
| 촬영 길이 | 기기 카메라 앱 기본 설정에 따름 (앱에서 제한하지 않음) |
| 촬영 화질 | 기기 기본 설정에 따름 |
| 업로드 시 검사 | 일반 업로드와 동일 (500MB, 10분 제한 적용) |

> **[개발 제안]** `<input capture>` 방식은 브라우저별 동작이 다를 수 있습니다. iOS Safari와 Chrome Android에서의 동작 차이가 있다면 개발팀에서 적절히 대응해 주세요. 추후 앱 래핑 시에는 네이티브 카메라 API로 전환할 수 있습니다.

---

## 5. 영상 렌더링

> PAGE_SPECIFICATION.md P6(내보내기)의 `[TBD]` 보완

### 5.1 렌더링 환경 [확정]

| 항목 | 확정 내용 |
|------|----------|
| 처리 위치 | 클라이언트 (사용자 모바일 기기) |
| 서버 관여 | 없음 (렌더링 결과물만 서버에 업로드) |

> **[개발 제안]** 클라이언트 렌더링 기술로 아래 옵션을 제안합니다. 최종 선택은 개발팀에서 브라우저 호환성 테스트 후 결정해 주세요.
>
> | 기술 | 장점 | 단점 |
> |------|------|------|
> | WebCodecs API | 네이티브 성능, 하드웨어 가속 | Safari 지원 제한적 |
> | FFmpeg.wasm | 범용성, 풍부한 코덱 지원 | WASM 파일 크기, 메모리 사용량 |
> | MediaRecorder + Canvas | 브라우저 호환성 좋음 | 품질/성능 제한 |

### 5.2 렌더링 시 적용해야 할 요소

클라이언트에서 최종 영상 파일을 생성할 때 아래 요소를 모두 합성해야 합니다.

| 요소 | 상세 |
|------|------|
| 영상 클립 | 순서, 트림 구간, 속도 반영 |
| 전환 효과 | 클립 간 fade/slide/zoom (또는 none) |
| 텍스트 오버레이 | 위치, 폰트, 크기, 색상, 스타일, 애니메이션 |
| 스티커 오버레이 | 위치, 크기, 애니메이션 |
| 필터 | 밝기, 대비, 채도, 색온도 (해당 구간만) |
| 오디오 믹싱 | 원본 영상 오디오(볼륨/음소거) + BGM(볼륨) |
| 출력 해상도 | 사용자 선택 (720p / 1080p / 4K) |
| 출력 포맷 | 사용자 선택 (MP4 / MOV) |

### 5.3 렌더링 UX 요구사항

| 항목 | 요구사항 |
|------|---------|
| 진행률 | 실제 처리 진행률을 퍼센트로 표시 (0~100%) |
| 취소 | 렌더링 중 취소 가능, 취소 시 임시 파일 정리 |
| 백그라운드 | 렌더링 중 앱을 벗어나면 중단됨 → 재진입 시 "렌더링이 중단되었습니다. 다시 시작하시겠습니까?" 안내 |
| 완료 후 | 결과 파일을 서버에 업로드 (공유/다운로드 목적) |
| 메모리 경고 | 기기 메모리 부족 시 "기기 메모리가 부족합니다. 다른 앱을 종료 후 다시 시도해주세요" (error 토스트) |

### 5.4 렌더링 결과물 저장

```
[렌더링 완료]
      │
 결과 파일 → 서버 업로드 (S3)
      │
 서버에서 다운로드 URL 발급
      │
 ┌────┼────┐
 │    │    │
공유  DL   계속편집
```

| 동작 | 상세 |
|------|------|
| 공유 | 서버에 저장된 URL 기반 공유 (6. 공유 기능 참조) |
| 다운로드 | 서버 URL에서 다운로드 또는 로컬 Blob URL에서 직접 다운로드 |
| 계속 편집 | 에디터 유지, 결과물은 서버에 보관 |

> **[개발 제안]** 렌더링 완료 후 서버 업로드 실패 시, 로컬 Blob URL로 다운로드는 가능하되 공유 기능은 비활성화하는 것을 권장합니다.

---

## 6. 공유 기능

> PAGE_SPECIFICATION.md P6 및 P1의 공유 관련 `[TBD]` 보완

### 6.1 공유 대상 [확정]

| 공유 방식 | 우선순위 | 동작 |
|----------|---------|------|
| **링크 복사** | 필수 | 공유 URL을 클립보드에 복사 |
| **카카오톡** | 필수 | 카카오톡 공유 API (링크 메시지) |
| **인스타그램 스토리** | 선택 | Instagram Sharing API |
| **기본 공유** | 필수 | Web Share API (`navigator.share`) 호출 → 기기 기본 공유 시트 |

### 6.2 공유 페이지 (링크 공유 시 랜딩)

공유된 링크를 받은 사람이 접속하면 보게 되는 페이지입니다.

```
┌────────────────────────────────────┐
│          [GolfSnap 로고]            │
├────────────────────────────────────┤
│                                    │
│     [영상 플레이어 (16:9/9:16)]     │
│                                    │
├────────────────────────────────────┤
│ 공유 제목                          │
│ 공유 설명                          │
│ 작성자: 닉네임 · 2026.02.09        │
├────────────────────────────────────┤
│   ┌──────────────────────────┐    │
│   │  GolfSnap에서 만들어보기    │    │  앱 유도 버튼
│   └──────────────────────────┘    │
└────────────────────────────────────┘
```

| 항목 | 상세 |
|------|------|
| URL 형식 | `https://{도메인}/share/{shareId}` |
| OG 태그 | 제목, 설명, 썸네일 이미지 (영상 첫 프레임) |
| 영상 재생 | HTML5 video 직접 재생 |
| 비로그인 접근 | 가능 (영상 보기만 가능) |
| 영상 다운로드 | 불가 (스트리밍 재생만) |
| 공유 만료 | 없음 (프로젝트 삭제 시 함께 삭제) |

### 6.3 공유 다이얼로그 상세

PAGE_SPECIFICATION.md P6 완료 후 [공유] 버튼 탭 시:

```
┌────────────────────────────────────┐
│ 영상 공유                        ✕ │
├────────────────────────────────────┤
│ 제목                               │
│ ┌──────────────────────────────┐  │
│ │ (프로젝트명 기본값)             │  │
│ └──────────────────────────────┘  │
│                                    │
│ 설명 (선택)                        │
│ ┌──────────────────────────────┐  │
│ │                              │  │
│ │ (자유 입력)                   │  │
│ └──────────────────────────────┘  │
│                                    │
│ 공개 설정                          │
│ ○ 전체 공개  ● 링크 아는 사람만     │
│                                    │
│ ┌─────┬─────┬─────┬─────┐       │
│ │ 링크  │카카오│인스타│ 더보기│       │  공유 방식 선택
│ │ 복사  │ 톡  │그램  │      │       │
│ └─────┴─────┴─────┴─────┘       │
└────────────────────────────────────┘
```

| 필드 | 규칙 |
|------|------|
| 제목 | 필수, 최대 100자, 기본값 = 프로젝트명 |
| 설명 | 선택, 최대 500자 |
| 공개 설정 | "전체 공개" = 탐색 탭에 노출 가능, "링크 아는 사람만" = URL 직접 접근만 가능 |
| "더보기" | Web Share API 호출 (기기 기본 공유 시트) |

---

## 7. 미구현 화면 기획 방향

> 하단 네비게이션 5개 탭 중 "만들기" 외 4개 탭의 기획 방향입니다.
> 상세 와이어프레임은 별도 문서로 제공할 예정입니다.

### 7.1 홈 탭

| 항목 | 내용 |
|------|------|
| 목적 | 앱 메인 화면, 추천 콘텐츠 및 빠른 진입 |
| 주요 구성 | 배너 영역, 최근 편집 프로젝트 (가로 스크롤), 인기 공유 영상, 공지사항 |
| 우선순위 | 1차 출시 포함 |

### 7.2 탐색 탭

| 항목 | 내용 |
|------|------|
| 목적 | 다른 사용자의 공유 영상 탐색 및 스크린골프 샷 기록 열람 |
| 주요 구성 | 검색 바, 카테고리 필터 (베스트샷/연습기록/하이라이트), 영상 카드 그리드 |
| 우선순위 | 1차 출시 포함 (기본 기능만) |

### 7.3 예약 탭

| 항목 | 내용 |
|------|------|
| 목적 | 스크린골프 매장 예약 |
| 주요 구성 | 매장 검색, 날짜/시간 선택, 예약 내역 |
| 우선순위 | **2차 출시로 연기** (1차에서는 "준비 중" 안내 화면) |

### 7.4 프로필(나) 탭

| 항목 | 내용 |
|------|------|
| 목적 | 사용자 정보 관리, 설정 |
| 주요 구성 | 프로필 정보 (수정 가능), 내 공유 영상 목록, 스토리지 사용량, 설정 (테마, 알림), 로그아웃, 회원 탈퇴 |
| 우선순위 | 1차 출시 포함 |

> **[협의 필요]** 홈 탭과 탐색 탭의 상세 와이어프레임은 디자인 작업 후 별도 전달 예정입니다. 1차 출시 스코프에서 탐색 탭의 범위(어디까지 구현할지)는 개발 일정을 보고 협의하겠습니다.

---

## 8. 디자인 시스템

> 프로토타입에서 사용된 디자인 토큰을 정리합니다. Tailwind CSS 기반입니다.

### 8.1 색상 체계

#### 브랜드 색상

| 토큰 | 라이트 모드 | 다크 모드 | 용도 |
|------|-----------|----------|------|
| primary | #16a34a (green-600) | #22c55e (green-500) | CTA 버튼, 활성 네비게이션, 주요 강조 |
| primary-light | #dcfce7 (green-100) | #166534 (green-800) | 배경 강조 |

#### 시스템 색상

| 토큰 | 라이트 모드 | 다크 모드 | 용도 |
|------|-----------|----------|------|
| background | #ffffff | #111827 (gray-900) | 페이지 배경 |
| surface | #f9fafb (gray-50) | #1f2937 (gray-800) | 카드, 패널 배경 |
| surface-elevated | #ffffff | #374151 (gray-700) | 떠있는 요소 (바텀시트, 다이얼로그) |
| border | #e5e7eb (gray-200) | #374151 (gray-700) | 테두리 |
| text-primary | #111827 (gray-900) | #f9fafb (gray-50) | 주요 텍스트 |
| text-secondary | #6b7280 (gray-500) | #9ca3af (gray-400) | 보조 텍스트 |
| text-tertiary | #9ca3af (gray-400) | #6b7280 (gray-500) | 비활성/힌트 텍스트 |

#### 트랙 식별 색상 (에디터 전용, 다크/라이트 동일)

| 트랙 | 색상 |
|------|------|
| 영상 | #3b82f6 (blue-500) |
| 텍스트 | #f59e0b (amber-500) |
| 오디오 | #10b981 (emerald-500) |
| 필터 | #a855f7 (purple-500) |
| 스티커 | #ec4899 (pink-500) |

#### 상태 색상

| 토큰 | 색상 | 용도 |
|------|------|------|
| success | #16a34a (green-600) | 성공 토스트, 완료 표시 |
| warning | #d97706 (amber-600) | 경고 토스트 |
| error | #dc2626 (red-600) | 에러 토스트, 삭제 버튼 |
| info | #1f2937 (gray-800) | 안내 토스트 |

### 8.2 타이포그래피

| 용도 | 크기 | 굵기 | 행간 | Tailwind 클래스 예시 |
|------|------|------|------|-------------------|
| 페이지 제목 | 20px | Bold (700) | 28px | `text-xl font-bold` |
| 섹션 제목 | 16px | Semibold (600) | 24px | `text-base font-semibold` |
| 카드 제목 | 14px | Medium (500) | 20px | `text-sm font-medium` |
| 본문 | 14px | Regular (400) | 20px | `text-sm` |
| 캡션/보조 | 12px | Regular (400) | 16px | `text-xs` |
| 뱃지/라벨 | 10px | Medium (500) | 14px | `text-[10px] font-medium` |
| 버튼 (대) | 16px | Semibold (600) | 24px | `text-base font-semibold` |
| 버튼 (소) | 14px | Medium (500) | 20px | `text-sm font-medium` |

**기본 폰트:** 시스템 기본 폰트 (`font-sans`)

> **[개발 제안]** 한글 웹폰트(Pretendard, Noto Sans KR 등)를 적용할 경우 로딩 성능을 고려해 주세요. 기획에서는 Pretendard를 선호하지만, 성능 이슈가 있다면 시스템 기본 폰트도 괜찮습니다.

### 8.3 간격(Spacing)

Tailwind 기본 스케일을 따릅니다.

| 용도 | 값 | Tailwind |
|------|-----|---------|
| 컴포넌트 내부 패딩 | 16px | `p-4` |
| 카드 간 간격 | 12px | `gap-3` |
| 섹션 간 간격 | 24px | `gap-6` 또는 `mb-6` |
| 화면 좌우 패딩 | 16px | `px-4` |
| 리스트 아이템 간격 | 8px | `gap-2` |

### 8.4 모서리 둥글기(Border Radius)

| 용도 | 값 | Tailwind |
|------|-----|---------|
| 버튼 | 12px | `rounded-xl` |
| 카드 | 12px | `rounded-xl` |
| 입력 필드 | 8px | `rounded-lg` |
| 바텀시트 상단 | 16px (상단만) | `rounded-t-2xl` |
| 썸네일 | 8px | `rounded-lg` |
| 원형 (아바타, 아이콘 배경) | 50% | `rounded-full` |

### 8.5 그림자(Shadow)

| 용도 | Tailwind |
|------|---------|
| 카드 (라이트 모드) | `shadow-sm` |
| 바텀시트 | `shadow-2xl` |
| 플로팅 버튼 | `shadow-lg` |
| 다크 모드 | 그림자 없음, border로 구분 |

---

## 9. 화면 전환 애니메이션

### 9.1 페이지 전환

| 전환 | 애니메이션 | 시간 | 이징 |
|------|----------|------|------|
| 앞으로 이동 (대시보드 → 비율선택 등) | 우측에서 슬라이드 인 | 300ms | ease-out |
| 뒤로 이동 (← 버튼) | 좌측으로 슬라이드 아웃 | 300ms | ease-out |
| 에디터 진입 (AI처리 완료 후) | 페이드 인 | 400ms | ease-out |
| 에디터 → 대시보드 | 좌측으로 슬라이드 아웃 | 300ms | ease-out |

### 9.2 오버레이/패널

| 요소 | 등장 | 퇴장 | 시간 |
|------|------|------|------|
| 바텀시트 | 하단에서 슬라이드 업 | 하단으로 슬라이드 다운 | 300ms |
| 편집 패널 (전체화면) | 하단에서 슬라이드 업 | 하단으로 슬라이드 다운 | 300ms |
| 내보내기 모달 | 페이드 인 + 약간 스케일 업 (0.95→1) | 페이드 아웃 | 200ms |
| 토스트 | 하단에서 슬라이드 업 + 페이드 인 | 페이드 아웃 | 등장 200ms, 퇴장 150ms |
| 다이얼로그 (확인/취소) | 페이드 인 + 스케일 (0.95→1) | 페이드 아웃 | 200ms |
| 배경 딤 (반투명 검정) | 페이드 인 (투명→50% 검정) | 페이드 아웃 | 200ms |

### 9.3 인터랙션 피드백

| 요소 | 피드백 |
|------|--------|
| 버튼 탭 | scale 0.97 → 1.0 (100ms) |
| 카드 탭 | scale 0.98 → 1.0 (100ms) |
| 토글 전환 | spring 애니메이션 (stiffness: 500, damping: 30) |
| 체크박스 | scale 0 → 1 (150ms, ease-out) |
| 삭제 후 리스트 아이템 | 높이 축소 + 페이드 아웃 (200ms) |

---

## 10. 네트워크 및 성능

### 10.1 API 응답 시간 가이드

| 요청 유형 | 목표 응답 시간 | 초과 시 |
|----------|-------------|--------|
| 목록 조회 (프로젝트, 미디어) | 1초 이내 | 스켈레톤 UI 표시 |
| 단일 조회 (프로젝트 상세) | 500ms 이내 | 스피너 표시 |
| 생성/수정/삭제 | 1초 이내 | 버튼 로딩 상태 |
| 파일 업로드 | 파일 크기에 비례 | 프로그레스 바 |
| 전체 타임아웃 | **30초** | 에러 토스트 + 재시도 |

### 10.2 미디어 목록 로딩 [확정]

| 항목 | 확정 내용 |
|------|----------|
| 방식 | **무한 스크롤** (페이지 버튼 없음) |
| 페이지 크기 | 30개씩 로드 |
| 로딩 트리거 | 스크롤이 하단 200px 이내에 도달했을 때 |
| 로딩 표시 | 하단에 스피너 (3개 점 로딩 애니메이션) |
| 더 이상 데이터 없음 | "모든 미디어를 불러왔습니다" 텍스트 |

### 10.3 이미지/영상 최적화 [개발 제안]

> **[개발 제안]** 아래 항목은 성능에 직접 영향을 미치는 부분이므로, 개발팀에서 최적의 방식을 선택해 주세요.

| 항목 | 기획 요구사항 | 개발 제안 |
|------|-------------|----------|
| 썸네일 로딩 | 미디어 그리드에서 빠르게 보여야 함 | lazy loading (`loading="lazy"` 또는 Intersection Observer) |
| 영상 미리보기 | 에디터에서 끊김 없이 재생 | 원본과 별도로 저화질 프록시 파일 생성 여부 검토 |
| 이미지 해상도 | 화면에 맞는 크기로 | 서버에서 여러 사이즈 제공 (256px, 512px, 원본) 또는 CDN 리사이즈 |

### 10.4 자동 저장 상세

| 항목 | 규칙 |
|------|------|
| 트리거 | 타임라인 변경 후 **2초** 동안 추가 변경 없으면 자동 저장 |
| 저장 실패 시 | "저장되지 않음" 상태 유지 → **5초 후 재시도** → 최대 **3회** 재시도 |
| 3회 실패 시 | "자동 저장에 실패했습니다. 네트워크를 확인해주세요" (error 토스트) + 수동 저장 버튼 표시 |
| 에디터 이탈 시 | 미저장 변경사항이 있으면 "저장되지 않은 변경사항이 있습니다. 나가시겠습니까?" 확인 다이얼로그 |

### 10.5 동시 편집 방지

| 시나리오 | 처리 |
|---------|------|
| 같은 프로젝트를 두 기기에서 열기 | 나중에 연 기기에 "다른 기기에서 편집 중입니다" 안내 → 읽기 전용 모드 또는 "강제 편집" 선택 |
| "강제 편집" 선택 시 | 이전 기기의 세션을 무효화하고 현재 기기에서 편집 |

> **[개발 제안]** 동시 편집 감지 방식(서버 Lock, WebSocket, 마지막 수정 시각 비교 등)은 개발팀에서 인프라 상황에 맞게 선택해 주세요. 1차 출시에서 복잡한 실시간 동기화는 불필요하며, "마지막 저장 시각 비교" 정도면 충분합니다.

---

## 11. 비즈니스 규칙

### 11.1 데이터 삭제 정책

| 동작 | 영향 범위 |
|------|----------|
| 프로젝트 삭제 | 프로젝트 데이터 + 타임라인 삭제, **미디어 원본은 유지** |
| 미디어 삭제 | 미디어 파일 삭제, **해당 미디어를 사용하는 프로젝트의 비디오 클립은 "미디어 없음" 상태로 표시** |
| "미디어 없음" 표시 | 에디터에서 해당 클립 회색 처리 + "원본 파일이 삭제되었습니다" 텍스트 |

### 11.2 회원 탈퇴

| 단계 | 상세 |
|------|------|
| 1. 탈퇴 요청 | 프로필 탭 → 설정 → "회원 탈퇴" → 확인 다이얼로그 |
| 2. 확인 텍스트 | "탈퇴 시 모든 프로젝트, 미디어, 공유 영상이 영구 삭제됩니다. 이 작업은 되돌릴 수 없습니다." |
| 3. 최종 확인 | "탈퇴하기" 입력란에 "탈퇴하기" 직접 타이핑해야 버튼 활성화 |
| 4. 처리 | 사용자 데이터 전체 삭제 (개인정보 포함), S3 미디어 파일 삭제 |
| 5. 완료 | 로그인 화면으로 이동, "탈퇴가 완료되었습니다" 토스트 |

> **[개발 제안]** 개인정보 처리 관련 법적 요구사항(보존 기간 등)이 있을 수 있습니다. 법무팀 검토 전까지는 즉시 삭제로 구현하되, 삭제를 30일간 유예(소프트 삭제)하는 방식도 고려해 주세요.

### 11.3 스토리지 사용량 표시

프로필 탭에서 현재 스토리지 사용량을 표시합니다.

```
저장 공간
████████████░░░░░░░░  3.2GB / 5.0GB (64%)
```

| 사용량 | 표시 |
|--------|------|
| 0~79% | 녹색 프로그레스 바 |
| 80~94% | 주황색 프로그레스 바 + "저장 공간이 부족합니다" 안내 |
| 95~100% | 빨간색 프로그레스 바 + 업로드 시 경고 |

---

## 12. API 상세 요구사항

> PAGE_SPECIFICATION.md의 API 명세를 보완합니다.
> 엔드포인트별 Request/Response 형식을 명시합니다.

### 12.1 공통 규칙

| 항목 | 규칙 |
|------|------|
| 기본 URL | `https://api.{도메인}/v1` |
| 인증 헤더 | `Authorization: Bearer {accessToken}` |
| 응답 형식 | JSON |
| 날짜 형식 | ISO 8601 (`2026-02-09T14:30:00Z`) |
| 페이지네이션 | `?page=1&limit=30` (1-based) |
| 정렬 | `?sort=createdAt:desc` |

> **[개발 제안]** API 버저닝 방식(URL path vs Header), 에러 응답 포맷, Rate Limiting 정책은 개발팀에서 결정해 주세요. 위 형식은 기획 의도를 전달하기 위한 예시입니다.

### 12.2 인증 API

#### POST `/auth/login/social`

소셜 로그인 처리

```
Request:
{
  "provider": "kakao" | "naver" | "google",
  "accessToken": "소셜 제공자에서 받은 토큰"
}

Response 200 (기존 사용자):
{
  "user": {
    "id": "uuid",
    "displayName": "골프왕",
    "bio": "100타 골퍼",
    "profileImage": "https://...",
    "theme": "system",
    "createdAt": "2026-01-15T09:00:00Z"
  },
  "token": {
    "accessToken": "jwt...",
    "refreshToken": "jwt...",
    "expiresIn": 3600
  },
  "isNewUser": false
}

Response 201 (신규 사용자):
{
  "user": { ... },  // displayName = 소셜 프로필 이름
  "token": { ... },
  "isNewUser": true  // → 프로필 설정 화면으로 이동
}
```

#### POST `/auth/refresh`

토큰 갱신

```
Request:
{
  "refreshToken": "jwt..."
}

Response 200:
{
  "accessToken": "new-jwt...",
  "refreshToken": "new-jwt...",
  "expiresIn": 3600
}

Response 401:
{
  "error": "TOKEN_EXPIRED",
  "message": "세션이 만료되었습니다. 다시 로그인해주세요."
}
```

### 12.3 미디어 API

#### POST `/media/upload`

미디어 업로드

```
Request: multipart/form-data
- file: (binary)              // 필수
- type: "video" | "image"     // 필수
- metadata: JSON string       // 선택 (스크린골프 샷 데이터)

Response 201:
{
  "id": "uuid",
  "type": "video",
  "uri": "https://cdn.../original/uuid.mp4",
  "thumbnail": "https://cdn.../thumb/uuid.jpg",
  "duration": 15.5,           // 초 (video만)
  "width": 1920,
  "height": 1080,
  "fileSize": 52428800,       // bytes
  "mimeType": "video/mp4",
  "hasMetadata": true,
  "metadata": { ... },
  "createdAt": "2026-02-09T14:30:00Z"
}

Response 400: { "error": "INVALID_FORMAT", "message": "지원하지 않는 파일 형식입니다" }
Response 413: { "error": "FILE_TOO_LARGE", "message": "파일 크기가 너무 큽니다 (최대 500MB)" }
Response 507: { "error": "STORAGE_FULL", "message": "저장 공간이 부족합니다" }
```

#### GET `/media?type=all&sort=createdAt:desc&page=1&limit=30`

미디어 목록 조회

```
Response 200:
{
  "items": [
    {
      "id": "uuid",
      "type": "video",
      "thumbnail": "https://cdn.../thumb/uuid.jpg",
      "duration": 15.5,
      "hasMetadata": true,
      "createdAt": "2026-02-09T14:30:00Z"
    },
    ...
  ],
  "pagination": {
    "page": 1,
    "limit": 30,
    "total": 85,
    "hasNext": true
  }
}
```

### 12.4 프로젝트 API

#### POST `/projects`

프로젝트 생성

```
Request:
{
  "aspectRatio": "16:9",                      // 필수
  "mediaIds": ["uuid1", "uuid2", "uuid3"],    // 필수, 최소 1개
  "templateId": "highlight-reel"              // 선택
}

Response 201:
{
  "id": "uuid",
  "name": "새 프로젝트",                       // 자동 생성
  "aspectRatio": "16:9",
  "duration": 45.5,
  "thumbnail": "https://cdn.../thumb/uuid1.jpg",
  "clips": [
    {
      "id": "clip-uuid-1",
      "mediaId": "uuid1",
      "duration": 15.5,
      "thumbnail": "https://...",
      "shotData": {                           // hasMetadata=true인 미디어만
        "distance": 285,
        "ballSpeed": 168,
        "club": "Driver",
        "accuracy": 92,
        "holeResult": "birdie"
      }
    },
    ...
  ],
  "timeline": [
    {
      "id": "tl-uuid-1",
      "clipId": "clip-uuid-1",
      "track": "video",
      "position": 0,
      "duration": 15.5,
      "startTime": 0,
      "endTime": 15.5,
      "speed": 1,
      "volume": 1,
      "audioMuted": false,
      "transitions": { "in": "none", "out": "none" }
    },
    ...  // 템플릿 선택 시 텍스트/오디오/필터/스티커 클립도 포함
  ],
  "createdAt": "2026-02-09T14:30:00Z",
  "updatedAt": "2026-02-09T14:30:00Z"
}
```

#### PATCH `/projects/{id}`

프로젝트 수정 (자동 저장, 이름 변경 등)

```
Request (타임라인 저장):
{
  "timeline": [ ... ],         // 전체 타임라인 배열
  "duration": 52.3             // 총 길이 재계산값
}

Request (이름 변경):
{
  "name": "내 베스트샷 모음"
}

Response 200:
{
  "id": "uuid",
  "updatedAt": "2026-02-09T14:35:00Z"
}
```

#### POST `/projects/{id}/duplicate`

프로젝트 복제

```
Response 201:
{
  "id": "new-uuid",
  "name": "내 베스트샷 모음 (복사)",
  ... // 원본과 동일한 구조, 새 ID와 타임스탬프
}
```

### 12.5 내보내기 API

#### POST `/exports`

렌더링 결과물 업로드 (클라이언트 렌더링 완료 후)

```
Request: multipart/form-data
- file: (binary)              // 렌더링된 영상 파일
- projectId: "uuid"           // 필수
- quality: "1080p"            // "720p" | "1080p" | "4k"
- format: "mp4"               // "mp4" | "mov"

Response 201:
{
  "id": "export-uuid",
  "projectId": "uuid",
  "downloadUrl": "https://cdn.../exports/export-uuid.mp4",
  "fileSize": 104857600,
  "quality": "1080p",
  "format": "mp4",
  "createdAt": "2026-02-09T15:00:00Z"
}
```

### 12.6 공유 API

#### POST `/shares`

공유 생성

```
Request:
{
  "exportId": "export-uuid",
  "title": "내 베스트샷",
  "description": "오늘 스크린골프에서 버디!",
  "visibility": "unlisted"    // "public" | "unlisted"
}

Response 201:
{
  "id": "share-uuid",
  "shareUrl": "https://{도메인}/share/share-uuid",
  "title": "내 베스트샷",
  "visibility": "unlisted",
  "createdAt": "2026-02-09T15:05:00Z"
}
```

### 12.7 AI 어시스턴트 API

#### POST `/ai/analyze`

샷 데이터 기반 추천 생성

```
Request:
{
  "shotDataList": [
    {
      "clipId": "clip-uuid-1",
      "distance": 285,
      "ballSpeed": 168,
      "club": "Driver",
      "accuracy": 92,
      "holeResult": "birdie"
    }
  ]
}

Response 200:
{
  "recommendations": [
    {
      "type": "sticker",
      "emoji": "🎯",
      "label": "버디 달성",
      "reason": "버디 결과 감지"
    },
    {
      "type": "sticker",
      "emoji": "🔥",
      "label": "파워 스윙",
      "reason": "볼 스피드 168mph (상위 10%)"
    },
    {
      "type": "text",
      "content": "285yd Driver",
      "reason": "비거리 기록"
    },
    {
      "type": "text",
      "content": "BIRDIE!",
      "reason": "버디 축하 텍스트"
    }
  ]
}
```

> **[개발 제안]** AI 추천 로직은 1차에서는 규칙 기반(rule-based)으로 구현하고, 추후 ML 모델로 교체할 수 있습니다. 규칙 기반 구현 시 서버/클라이언트 어디에 둘지는 개발팀에서 결정해 주세요.

---

## 13. 개발자 결정 필요 사항 종합

이 문서에서 `[개발 제안]`으로 표기된 항목을 종합한 체크리스트입니다.
개발 착수 전 또는 진행 중 결정해 주세요.

### 반드시 착수 전 결정

| # | 항목 | 기획 제안 | 영향 범위 |
|---|------|----------|----------|
| 1 | 클라이언트 영상 렌더링 기술 | WebCodecs, FFmpeg.wasm, MediaRecorder 중 선택 | 내보내기(P6) 전체 |
| 2 | OAuth 토큰 관리 방식 | JWT + Refresh Token | 전체 API 인증 |
| 3 | 파일 업로드 방식 | 대용량은 청크(chunk) 업로드 권장 | 미디어 업로드 |
| 4 | 썸네일 생성 위치 | 서버 FFmpeg 또는 업로드 시 클라이언트 생성 | 미디어 업로드, 목록 표시 |
| 5 | HEIC 변환 위치 | 서버 변환 권장 | 미디어 업로드 |
| 6 | 데이터베이스 선택 | - | 전체 백엔드 |
| 7 | 백엔드 프레임워크/언어 | - | 전체 백엔드 |

### 개발 진행 중 결정 가능

| # | 항목 | 기획 제안 | 영향 범위 |
|---|------|----------|----------|
| 8 | 영상 프록시 파일 생성 여부 | 에디터 재생 성능 따라 판단 | 에디터 미리보기 |
| 9 | 이미지 CDN 리사이즈 방식 | CDN 리사이즈 또는 서버 사전 생성 | 미디어 목록 성능 |
| 10 | 동시 편집 감지 방식 | 마지막 수정 시각 비교 (심플) | 에디터 자동 저장 |
| 11 | AI 추천 로직 위치 | 1차는 규칙 기반, 서버/클라이언트 어디든 | AI 어시스턴트 |
| 12 | 한글 웹폰트 적용 여부 | Pretendard 선호, 성능 이슈 시 시스템 폰트 | 전체 UI |
| 13 | 세션 유효 기간 | 최소 2주 | 인증 |
| 14 | 회원 탈퇴 유예 기간 | 즉시 삭제 또는 30일 소프트 삭제 | 회원 관리 |
| 15 | API 에러 응답 포맷 | 위 예시 참고 | 전체 API |

---

> **다음 단계:**
> 1. 이 문서의 `[개발 제안]` 항목에 대해 개발팀 의견 수렴
> 2. 홈/탐색/프로필 탭 상세 와이어프레임 별도 전달
> 3. 각 화면 스크린샷을 PAGE_SPECIFICATION.md에 첨부
> 4. 개발팀 피드백 반영 후 문서 v1.1 업데이트
