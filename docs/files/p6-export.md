# P6. 내보내기

> **파일**: `p6-export.md`
> **최종 수정**: v1.2 (2026-02-11)

---

<!-- SECTION: P6-META -->
## 개요

| 항목 | 내용 |
|------|------|
| 목적 | 편집된 영상을 최종 파일로 렌더링하여 공유/다운로드 |
| 진입 경로 | 에디터(P5) 상단 "만들기" 버튼 |
| 표시 방식 | 모달 오버레이 (반투명 배경 딤) |
| 렌더링 위치 | **클라이언트(모바일 기기)** — 서버는 렌더링 관여 없음 |

### 진입 파라미터

| 파라미터 | 타입 | 설명 |
|---------|------|------|
| `projectName` | `string` | 프로젝트 이름 (헤더 및 파일명에 표시) |
| `onClose` | `() => void` | 닫기 → 에디터(P5)로 복귀 |
| `onComplete` | `(mode?: 'dashboard' \| 'continue') => void` | 완료 시 동선 결정 콜백 |

### 모달 구조

| 항목 | 규칙 |
|------|------|
| 배경 딤 | `bg-black/70` (70% 불투명 검정) |
| 모달 카드 | `max-w-md`, `rounded-2xl`, `bg-gray-800` |
| Z-index | 50 (에디터 위에 렌더링) |
| 모달 진입 | scale 0.9 → 1, opacity 0 → 1 |
| 모달 퇴장 | scale 1 → 0.9, opacity 1 → 0 |

### 단계 흐름

```
[1. 설정] ──만들기 시작──▶ [2. 렌더링] ──완료──▶ [3. 완료]
                              │                        │
                              ├── 취소 ──▶ [1. 설정]   ├── 공유 ──▶ [공유 다이얼로그]
                              │                        ├── 다운로드 ──▶ [4. 다운로드 완료]
                              │                        └── 계속 편집 ──▶ [에디터(P5)]
```

### 타입 정의

```typescript
type ExportStep = 'settings' | 'rendering' | 'complete' | 'download-complete';

interface QualityOption {
  id: '720p' | '1080p' | '4k';
  label: string;        // "HD 720p" | "Full HD 1080p" | "4K UHD"
  resolution: string;   // "1280×720" 등
  size: string;         // "작음" | "중간" | "큼"
}

interface FormatOption {
  id: 'mp4' | 'mov';
  label: string;        // "MP4" | "MOV"
  description: string;  // "호환성이 가장 좋음" | "고품질 편집용"
}
```

---

<!-- SECTION: P6-A -->
## A. 설정 단계 헤더

```
┌────────────────────────────────────┐
│ 만들기 설정                      ✕ │
└────────────────────────────────────┘
```

| 요소 | 상세 |
|------|------|
| 제목 | "만들기 설정" |
| 제목 스타일 | 18px (text-lg), bold, white |
| ✕ 닫기 버튼 | 32×32px (w-8 h-8), `rounded-full`, `bg-gray-700` |
| 닫기 동작 | `onClose()` → 에디터(P5)로 복귀 |
| 닫기 애니메이션 | whileTap: scale 0.9 |
| 하단 여백 | 24px (mb-6) |

---

<!-- SECTION: P6-B -->
## B. 프로젝트 정보 + 화질 선택

```
┌────────────────────────────────────┐
│  프로젝트                           │
│  [프로젝트 이름]                    │
├────────────────────────────────────┤
│  화질                               │
│  ┌──────────────────────────────┐  │
│  │ HD 720p       1280×720  작음 │  │  비선택
│  └──────────────────────────────┘  │
│  ┌══════════════════════════════┐  │
│  ║ Full HD 1080p 1920×1080 중간 ║  │  선택 (golf-green 테두리)
│  └══════════════════════════════┘  │
│  ┌──────────────────────────────┐  │
│  │ 4K UHD        3840×2160  큼  │  │  비선택
│  └──────────────────────────────┘  │
└────────────────────────────────────┘
```

### 프로젝트 정보 박스

| 항목 | 규칙 |
|------|------|
| 배경 | `bg-gray-700`, `rounded-xl`, `p-4` |
| 라벨 | "프로젝트" (14px, gray-400, mb-1) |
| 값 | 프로젝트 이름 (white, font-medium) |
| 하단 여백 | 24px (mb-6) |
| 인터랙션 | 없음 (표시 전용) |

### 화질 선택

| 항목 | 규칙 |
|------|------|
| 섹션 라벨 | "화질" (14px, semibold, gray-400, mb-3) |
| 항목 간격 | 8px (space-y-2) |
| 선택 패턴 | 라디오 (단일 선택) |
| 기본 선택 | Full HD 1080p |

### 화질 옵션 데이터

| 화질 | 라벨 | 해상도 | 크기 라벨 |
|------|------|--------|----------|
| 720p | HD 720p | 1280×720 | 작음 |
| 1080p | Full HD 1080p | 1920×1080 | 중간 |
| 4k | 4K UHD | 3840×2160 | 큼 |

### 화질별 출력 해상도 (비율별)

| 화질 | 16:9 | 9:16 | 1:1 |
|------|------|------|-----|
| HD 720p | 1280×720 | 720×1280 | 720×720 |
| Full HD 1080p | 1920×1080 | 1080×1920 | 1080×1080 |
| 4K UHD | 3840×2160 | 2160×3840 | 2160×2160 |

### 화질 카드 상태

#### 비선택 상태

| 속성 | 값 |
|------|-----|
| 배경 | `bg-gray-700` |
| 호버 | `bg-gray-600` |
| 테두리 | 없음 |
| 탭 애니메이션 | whileTap: scale 0.98 |

#### 선택 상태

| 속성 | 값 |
|------|-----|
| 배경 | `bg-golf-green/20` (golf-green 20% 투명) |
| 테두리 | `ring-2 ring-golf-green` |
| 아이콘 색상 | golf-green |

### 화질 카드 레이아웃

| 요소 | 위치 |
|------|------|
| 좌측 | 화질 라벨 (white, font-medium) + 해상도 (12px, gray-400) |
| 우측 | 크기 배지 (12px, `px-2 py-1`, `rounded`, `bg-gray-600`, gray-300) |

---

<!-- SECTION: P6-C -->
## C. 포맷 선택

```
┌────────────────────────────────────┐
│  포맷                               │
│  ┌════════════════┬──────────────┐  │
│  ║ MP4            │ MOV          │  │
│  ║ 호환성이 가장  │ 고품질       │  │
│  ║ 좋음           │ 편집용       │  │
│  └════════════════┴──────────────┘  │
└────────────────────────────────────┘
```

| 항목 | 규칙 |
|------|------|
| 섹션 라벨 | "포맷" (14px, semibold, gray-400, mb-3) |
| 레이아웃 | `flex gap-2` (2열, 동일 너비) |
| 선택 패턴 | 라디오 (단일 선택) |
| 기본 선택 | MP4 |

### 포맷 옵션 데이터

| 포맷 | 라벨 | 설명 | 코덱 |
|------|------|------|------|
| mp4 | MP4 | 호환성이 가장 좋음 | H.264 + AAC |
| mov | MOV | 고품질 편집용 | H.264 + AAC |

### 포맷 카드 상태

| 상태 | 배경 | 텍스트 |
|------|------|--------|
| 비선택 | `bg-gray-700` | gray-300 |
| 비선택 호버 | `bg-gray-600` | gray-300 |
| 선택 | `bg-golf-green` | white |

### 포맷 카드 레이아웃

| 요소 | 규칙 |
|------|------|
| 너비 | `flex-1` (각 50%) |
| 패딩 | 16px (p-4) |
| 라운드 | `rounded-xl` |
| 1행 | 포맷명 (font-semibold) |
| 2행 | 설명 (12px, opacity-80) |
| 탭 애니메이션 | whileTap: scale 0.95 |

---

<!-- SECTION: P6-D -->
## D. 만들기 시작 버튼

```
┌────────────────────────────────────┐
│  ┌──────────────────────────────┐  │
│  │     🔗 만들기 시작             │  │
│  └──────────────────────────────┘  │
└────────────────────────────────────┘
```

| 속성 | 값 |
|------|-----|
| 너비 | 100% (w-full) |
| 높이 | py-4 (패딩 16px 상하) |
| 배경색 | `bg-golf-green` (#2D5A3D) |
| 텍스트 | "만들기 시작", white, semibold |
| 아이콘 | Share2 (20×20px, w-5 h-5), 텍스트 좌측 |
| 아이콘-텍스트 간격 | 8px (gap-2) |
| 라운드 | `rounded-xl` |
| 탭 애니메이션 | whileTap: scale 0.98 |
| 탭 동작 | 렌더링 단계(6.2)로 전환 |

### 단계 전환 애니메이션

| 항목 | 규칙 |
|------|------|
| 방식 | AnimatePresence mode="wait" |
| 진입 | opacity 0, x: -20 → opacity 1, x: 0 |
| 퇴장 | opacity 1, x: 0 → opacity 0, x: -20 |

---

<!-- SECTION: P6-RENDER -->
## 6.2 렌더링 단계

### 렌더링 시 합성 요소

클라이언트에서 최종 영상 파일을 생성할 때 아래 요소를 모두 합성해야 합니다.

| 요소 | 상세 |
|------|------|
| 영상 클립 | 순서, 트림 구간(`startTime`~`endTime`), 속도(`speed`) 반영 |
| 전환 효과 | 클립 간 fade/slide/zoom (또는 none) |
| 텍스트 오버레이 | 위치, 폰트, 크기, 색상, 스타일, 애니메이션 |
| 스티커 오버레이 | 위치, 크기, 애니메이션 |
| 필터 | 밝기, 대비, 채도, 색온도 (해당 구간만) |
| 오디오 믹싱 | 원본 영상 오디오(볼륨/음소거) + BGM(볼륨) |
| 출력 해상도 | 사용자 선택값 |
| 출력 포맷 | 사용자 선택값 (MP4: H.264+AAC / MOV: H.264+AAC) |

### 렌더링 진행 UI

```
┌────────────────────────────────────┐
│                                    │
│  "만드는 중..."                     │  제목 (text-lg, bold, white)
│  "잠시만 기다려 주세요"             │  부제 (text-sm, gray-400)
│                                    │
│         ┌─────────┐               │
│         │         │               │
│         │  67%    │  원형 프로그레스 (128×128px SVG)
│         │         │               │
│         └─────────┘               │
│                                    │
│  "효과 렌더링 중"                   │  현재 작업 텍스트 (페이드 전환)
│                                    │
│  ████████████░░░░░░░░             │  바 프로그레스 (h-2)
│                                    │
│         [취소]                     │
└────────────────────────────────────┘
```

### 헤더 텍스트

| 요소 | 스타일 |
|------|--------|
| 제목 | "만드는 중..." (18px, bold, white, mb-2) |
| 부제 | "잠시만 기다려 주세요" (14px, gray-400) |
| 정렬 | 중앙 정렬, mb-8 |

### 원형 프로그레스 (SVG)

| 항목 | 규칙 |
|------|------|
| 크기 | 128×128px (w-32 h-32) |
| 회전 | SVG transform -rotate-90 (12시 방향 시작) |
| 배경 원 | cx=64, cy=64, r=56, strokeWidth=8, gray-700 |
| 진행 원 | cx=64, cy=64, r=56, strokeWidth=8, golf-green |
| 진행 방식 | strokeDasharray = 2πr (~352px), strokeDashoffset 감소 |
| 끝 모양 | strokeLinecap="round" |
| 애니메이션 | transition-all duration-300 |
| 중앙 텍스트 | "{progress}%" (24px, bold, white) |
| 하단 여백 | mb-8 |

### 바 프로그레스

| 항목 | 규칙 |
|------|------|
| 높이 | 8px (h-2) |
| 배경 | `bg-gray-700`, `rounded-full` |
| 진행 색상 | `bg-golf-green` |
| 애니메이션 | motion.div width 전환, duration 300ms |
| 상단 여백 | mt-6 |

### 현재 작업 텍스트

| 항목 | 규칙 |
|------|------|
| 스타일 | 14px (text-sm), gray-400, 중앙 정렬 |
| 전환 애니메이션 | 진입: opacity 0, y: 10 → opacity 1, y: 0 |
| 퇴장 애니메이션 | opacity 1, y: 0 → opacity 0, y: -10 |
| key | currentTask (변경 시 재트리거) |

### 렌더링 단계별 진행

| 단계 | 메시지 | 소요 시간 | 진행률 |
|------|--------|----------|--------|
| 1 | "프레임 처리 중" | 2,000ms | 0% → 25% |
| 2 | "오디오 믹싱 중" | 1,500ms | 25% → 50% |
| 3 | "효과 렌더링 중" | 2,000ms | 50% → 75% |
| 4 | "최종 인코딩 중" | 1,500ms | 75% → 100% |
| **합계** | | **~7,000ms** | **0% → 100%** |

### 프로토타입 시뮬레이션 방식

| 항목 | 규칙 |
|------|------|
| 마이크로 스텝 | 각 단계를 50개 스텝으로 분할 |
| 스텝당 증가 | 25% / 50 = 0.5% |
| 스텝당 시간 | 단계 소요시간 / 50 |
| 취소 체크 | 매 스텝마다 `cancelledRef.current` 확인 |

### 실 서비스 진행률 표시

| 항목 | 규칙 |
|------|------|
| 방식 | 실제 클라이언트 렌더링 엔진의 진행률을 퍼센트로 표시 |
| 단계 전환 | 실제 처리 단계에 맞춰 메시지 자동 전환 |

### 취소

| 항목 | 규칙 |
|------|------|
| 취소 버튼 | "취소" (w-full, py-3, `rounded-xl`, `bg-gray-700`, gray-300, mt-6) |
| 취소 방식 | `cancelledRef.current = true` 설정 → 루프 즉시 중단 |
| 취소 후 | progress=0, currentTask="" 초기화, 설정 단계로 복귀 |
| 탭 애니메이션 | whileTap: scale 0.98 |

### 백그라운드 중단

| 시나리오 | 처리 |
|---------|------|
| 렌더링 중 앱 이탈 | 렌더링 중단됨 |
| 재진입 시 | "렌더링이 중단되었습니다. 다시 시작하시겠습니까?" 안내 |
| "다시 시작" | 설정 단계부터 다시 시작 |
| "취소" | 에디터(P5)로 복귀 |

### 메모리 부족

기기 메모리 부족 감지 시: "기기 메모리가 부족합니다. 다른 앱을 종료 후 다시 시도해주세요" (error 토스트)

---

<!-- SECTION: P6-COMPLETE -->
## 6.3 완료 단계

```
┌────────────────────────────────────┐
│                                    │
│         (✓) 녹색 원형 아이콘        │  w-20 h-20, bg-golf-green/20
│                                    │
│  "만들기 완료!"                     │  text-xl, bold, white
│  "영상이 성공적으로 저장되었습니다" │  text-sm, gray-400
│                                    │
│  ┌──────────────────────────────┐  │
│  │ 파일명   프로젝트.mp4         │  │  p-4, bg-gray-700, rounded-xl
│  │ 화질     Full HD 1080p       │  │
│  └──────────────────────────────┘  │
│                                    │
│  ┌──────────────┬───────────────┐  │
│  │   🔗 공유     │   📥 다운로드  │  │  flex gap-3
│  └──────────────┴───────────────┘  │
│  ┌──────────────────────────────┐  │
│  │        ✏️ 계속 편집           │  │  w-full
│  └──────────────────────────────┘  │
└────────────────────────────────────┘
```

### 성공 아이콘

| 항목 | 규칙 |
|------|------|
| 외곽 원 | 80×80px (w-20 h-20), `rounded-full`, `bg-golf-green/20` |
| 아이콘 | Check (40×40px, w-10 h-10), golf-green |
| 정렬 | mx-auto, mb-4 |
| 애니메이션 | scale 0 → 1 (spring: stiffness 200, damping 15) |

### 제목 텍스트

| 요소 | 스타일 |
|------|--------|
| 제목 | "만들기 완료!" (20px, bold, white, mb-2) |
| 부제 | "영상이 성공적으로 저장되었습니다" (14px, gray-400) |
| 정렬 | 중앙 정렬, mb-8 |

### 파일 정보 박스

| 항목 | 규칙 |
|------|------|
| 배경 | `bg-gray-700`, `rounded-xl`, `p-4`, `mb-6` |
| 파일명 행 | 좌: "파일명" (14px, gray-400) / 우: "{프로젝트명}.{포맷}" (14px, white, font-medium) |
| 화질 행 | 좌: "화질" (14px, gray-400) / 우: 선택한 화질 라벨 (14px, white, font-medium) |
| 행 간격 | mb-2 (마지막 행 제외) |

### 렌더링 결과물 서버 업로드

렌더링 완료 즉시 결과 파일을 서버에 업로드합니다 (공유/다운로드 URL 확보용).

```
POST /api/exports

Request: multipart/form-data
- file: (binary)              // 렌더링된 영상 파일
- projectId: "uuid"
- quality: "1080p"            // "720p" | "1080p" | "4k"
- format: "mp4"               // "mp4" | "mov"

Response 201:
{
  "id": "export-uuid",
  "projectId": "uuid",
  "downloadUrl": "https://cdn.../exports/export-uuid.mp4",
  "fileSize": 104857600,
  "quality": "1080p",
  "format": "mp4",
  "createdAt": "2026-02-09T15:00:00Z"
}
```

| 시나리오 | 처리 |
|---------|------|
| 업로드 성공 | 공유/다운로드 모두 가능 |
| 업로드 실패 | 로컬 Blob URL로 다운로드는 가능, **공유 버튼 비활성화** + "서버 업로드에 실패했습니다. 다운로드는 가능합니다" (warning 토스트) |

---

<!-- SECTION: P6-ACTIONS -->
## 완료 후 동선

### 버튼 레이아웃

| 영역 | 버튼 | 배치 |
|------|------|------|
| 상단 2열 | 공유 + 다운로드 | `flex gap-3`, 각 `flex-1` |
| 하단 1열 | 계속 편집 | `w-full` |
| 영역 간격 | 12px (space-y-3) |

### 공유 버튼

| 속성 | 값 |
|------|-----|
| 아이콘 | Share2 (20×20px) |
| 텍스트 | "공유" (white, semibold) |
| 배경 | `bg-golf-green` |
| 높이 | py-4 |
| 라운드 | `rounded-xl` |
| 탭 동작 | 공유 다이얼로그 열기 |
| 탭 애니메이션 | whileTap: scale 0.98 |

### 다운로드 버튼

| 속성 | 값 |
|------|-----|
| 아이콘 | Download (20×20px) |
| 텍스트 | "다운로드" (white, semibold) |
| 배경 | `bg-gray-700` |
| 높이 | py-4 |
| 라운드 | `rounded-xl` |
| 탭 동작 | 다운로드 실행 → 다운로드 완료 단계(6.4)로 전환 |
| 탭 애니메이션 | whileTap: scale 0.98 |

### 계속 편집 버튼

| 속성 | 값 |
|------|-----|
| 아이콘 | Edit3 (16×16px) |
| 텍스트 | "계속 편집" (white, font-medium) |
| 배경 | `bg-gray-700` |
| 높이 | py-4 |
| 라운드 | `rounded-xl` |
| 탭 동작 | `onComplete('continue')` → 모달 닫기, 에디터 유지 |
| 탭 애니메이션 | whileTap: scale 0.98 |

### 다운로드 처리

| 항목 | 규칙 |
|------|------|
| 우선순위 | 서버 `downloadUrl`로 다운로드 시도, 실패 시 로컬 Blob URL 사용 |
| 파일명 | `{프로젝트명}.{포맷}` (예: "내 프로젝트.mp4") |
| 완료 후 | 다운로드 완료 단계(6.4)로 자동 전환 |

---

<!-- SECTION: P6-DOWNLOAD-COMPLETE -->
## 6.4 다운로드 완료 단계

```
┌────────────────────────────────────┐
│                                    │
│         (📥) 녹색 원형 아이콘       │  w-20 h-20, bg-golf-green/20
│                                    │
│  "다운로드 완료!"                   │  text-xl, bold, white
│  "프로젝트.mp4 파일이              │  text-sm, gray-400
│   기기에 저장되었습니다"           │
│                                    │
│  ┌──────────────────────────────┐  │
│  │ 파일명   프로젝트.mp4         │  │  p-4, bg-gray-700, rounded-xl
│  │ 화질     Full HD 1080p       │  │
│  └──────────────────────────────┘  │
│                                    │
│  ┌──────────────────────────────┐  │
│  │            확인               │  │  w-full, bg-golf-green
│  └──────────────────────────────┘  │
└────────────────────────────────────┘
```

### 다운로드 아이콘

| 항목 | 규칙 |
|------|------|
| 외곽 원 | 80×80px (w-20 h-20), `rounded-full`, `bg-golf-green/20` |
| 아이콘 | Download (40×40px, w-10 h-10), golf-green |
| 애니메이션 | scale 0 → 1 (spring: stiffness 200, damping 15) |

### 텍스트

| 요소 | 스타일 |
|------|--------|
| 제목 | "다운로드 완료!" (20px, bold, white, mb-2) |
| 부제 | "{프로젝트명}.{포맷} 파일이\n기기에 저장되었습니다" (14px, gray-400, mb-6) |

### 파일 정보 박스

완료 단계(6.3)와 동일한 구조.

### 확인 버튼

| 속성 | 값 |
|------|-----|
| 텍스트 | "확인" (white, semibold) |
| 배경 | `bg-golf-green` |
| 높이 | py-4 |
| 너비 | w-full |
| 라운드 | `rounded-xl` |
| 탭 동작 | `onComplete('dashboard')` → 대시보드(P1)로 이동 |
| 탭 애니메이션 | whileTap: scale 0.98 |

---

<!-- SECTION: P6-SHARE -->
## 공유 다이얼로그

완료 단계에서 "공유" 버튼 탭 시 표시되는 별도 다이얼로그입니다.

```
┌────────────────────────────────────┐
│ 공유하기                         ✕ │
├────────────────────────────────────┤
│                                    │
│ 제목                               │
│ ┌──────────────────────────────┐  │
│ │ 제목을 입력하세요              │  │  maxLength: 100
│ └──────────────────────────────┘  │
│                                    │
│ 내용                               │
│ ┌──────────────────────────────┐  │
│ │ 내용을 입력하세요              │  │  rows: 4, maxLength: 500
│ │                              │  │
│ └──────────────────────────────┘  │
│ 0/500                             │  글자 수 카운터
│                                    │
│  [취소]        [🔗 공유하기]       │  flex gap-2
└────────────────────────────────────┘
```

### 다이얼로그 구조

| 항목 | 규칙 |
|------|------|
| Z-index | 100 (내보내기 모달 위) |
| 배경 딤 | `bg-black/50` |
| 카드 | `rounded-2xl`, `bg-white`, `max-w-md`, `p-6` |
| 진입 | scale 0.9 → 1, opacity 0 → 1 |

### 입력 필드

| 필드 | 타입 | 규칙 |
|------|------|------|
| 제목 | `<input>` | 필수 아님, 최대 100자, placeholder "제목을 입력하세요" |
| 내용 | `<textarea>` | 선택, 최대 500자, 4행, placeholder "내용을 입력하세요", resize-none |
| 글자 수 | 텍스트 | "{content.length}/500" (12px, gray-400) |

### 입력 필드 스타일

| 속성 | 값 |
|------|-----|
| 배경 | white |
| 테두리 | `border border-gray-300` |
| 패딩 | `px-4 py-3` |
| 라운드 | `rounded-xl` |
| 포커스 | `ring-2 ring-golf-green` |

### 버튼

| 버튼 | 스타일 | 동작 |
|------|--------|------|
| 취소 | `bg-gray-100`, gray-700, font-medium | 다이얼로그 닫기 → 완료 단계로 복귀 |
| 공유하기 | `bg-golf-green`, white, font-medium, Share2 아이콘 | 공유 실행 |

### 공유하기 버튼 비활성 조건

| 상태 | 조건 |
|------|------|
| 비활성 | 제목과 내용 모두 비어있을 때 (`!title.trim() && !content.trim()`) |
| 비활성 스타일 | `opacity-50`, `cursor-not-allowed` |
| 활성 | 제목 또는 내용 중 하나라도 입력됨 |

### 공유 완료 화면

공유 성공 시 다이얼로그 내용이 완료 화면으로 전환됩니다.

| 요소 | 규칙 |
|------|------|
| 아이콘 | 녹색 원형 + 체크 아이콘 (64×64px, w-16 h-16) |
| 제목 | "공유가 완료되었습니다" (18px, bold) |
| 부제 | "콘텐츠가 성공적으로 공유되었습니다" (14px, gray-500) |
| 확인 버튼 | golf-green, 탭 시 `onComplete('dashboard')` → 대시보드(P1) 이동 |

### 공유 생성 API

```
POST /api/shares

Request:
{
  "exportId": "export-uuid",
  "title": "내 베스트샷",
  "description": "오늘 스크린골프에서 버디!"
}

Response 201:
{
  "id": "share-uuid",
  "shareUrl": "https://{도메인}/share/share-uuid",
  "title": "내 베스트샷",
  "createdAt": "2026-02-09T15:05:00Z"
}
```

### 공유 에러

| 동작 | 처리 |
|------|------|
| 공유 성공 | 다이얼로그 내 완료 화면 표시 |
| 공유 실패 | "공유에 실패했습니다" (error 토스트) → 다이얼로그 유지, 재시도 가능 |
| ✕ 닫기 | 완료 단계(6.3)로 복귀 |

---

<!-- SECTION: P6-SHARE-PAGE -->
## 공유 페이지 (수신자 랜딩)

공유된 링크(`https://{도메인}/share/{shareId}`)를 받은 사람이 보는 페이지입니다.

```
┌────────────────────────────────────┐
│          [GolfSnap 로고]            │
├────────────────────────────────────┤
│                                    │
│     [영상 플레이어]                  │
│                                    │
├────────────────────────────────────┤
│ 공유 제목                          │
│ 공유 설명                          │
│ 작성자: 닉네임 · 날짜              │
├────────────────────────────────────┤
│   [GolfSnap에서 만들어보기]          │  앱 유도 버튼
└────────────────────────────────────┘
```

| 항목 | 상세 |
|------|------|
| URL 형식 | `https://{도메인}/share/{shareId}` |
| OG 태그 | 제목, 설명, 썸네일 이미지 (영상 첫 프레임) |
| 영상 재생 | HTML5 `<video>` 직접 재생 (스트리밍) |
| 비로그인 접근 | 가능 (영상 보기만 가능) |
| 영상 다운로드 | 불가 (스트리밍 재생만) |
| 공유 만료 | 없음 (프로젝트 삭제 시 함께 삭제) |
| "GolfSnap에서 만들어보기" | 앱 다운로드 또는 웹앱 메인으로 유도 |

---

<!-- SECTION: P6-ERROR -->
## 에러 처리

| 에러 | UI 처리 | 이후 동선 |
|------|---------|----------|
| 렌더링 실패 | "렌더링에 실패했습니다" (error 토스트) | 설정 단계로 복귀, 재시도 가능 |
| 메모리 부족 | "기기 메모리가 부족합니다" (error 토스트) | 설정 단계로 복귀 |
| 서버 업로드 실패 | "서버 업로드에 실패했습니다" (warning 토스트) | 다운로드 가능, 공유 불가 |
| 공유 생성 실패 | "공유에 실패했습니다" (error 토스트) | 공유 다이얼로그 유지, 재시도 가능 |
| 백그라운드 중단 | "렌더링이 중단되었습니다" 안내 | 다시 시작 또는 에디터 복귀 |

---

<!-- SECTION: P6-STATE -->
## 상태 관리

### 컴포넌트 로컬 상태

| 상태 | 타입 | 초기값 | 설명 |
|------|------|--------|------|
| `step` | `ExportStep` | `'settings'` | 현재 단계 |
| `quality` | `string` | `'1080p'` | 선택 화질 |
| `format` | `string` | `'mp4'` | 선택 포맷 |
| `progress` | `number` | `0` | 렌더링 진행률 (0~100) |
| `currentTask` | `string` | `''` | 현재 렌더링 작업 메시지 |
| `showShareDialog` | `boolean` | `false` | 공유 다이얼로그 표시 여부 |
| `cancelledRef` | `Ref<boolean>` | `false` | 렌더링 취소 플래그 |

### 공유 다이얼로그 상태

| 상태 | 타입 | 초기값 | 설명 |
|------|------|--------|------|
| `step` | `'input' \| 'success'` | `'input'` | 다이얼로그 내부 단계 |
| `title` | `string` | `''` | 공유 제목 |
| `content` | `string` | `''` | 공유 내용 |

---

<!-- SECTION: P6-ANIMATION -->
## 애니메이션

| 요소 | 애니메이션 | 상세 |
|------|----------|------|
| 모달 진입 | scale + fade | scale 0.9→1, opacity 0→1 |
| 모달 퇴장 | scale + fade | scale 1→0.9, opacity 1→0 |
| 단계 전환 | slide + fade | x: -20→0, opacity 0→1 (AnimatePresence mode="wait") |
| 버튼 탭 | scale | whileTap: scale 0.98 (일반) / 0.95 (포맷) / 0.9 (닫기) |
| 완료 아이콘 | spring | scale 0→1, spring stiffness 200, damping 15 |
| 작업 텍스트 전환 | y + fade | 진입: y 10→0 / 퇴장: y 0→-10 |
| 원형 프로그레스 | strokeDashoffset | transition-all duration-300 |
| 바 프로그레스 | width | motion.div duration 300ms |
| 공유 다이얼로그 진입 | scale + fade | scale 0.9→1, opacity 0→1 |
