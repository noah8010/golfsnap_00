# P2. 비율 선택

> **파일**: `p2-ratio.md`
> **최종 수정**: v1.3 (2026-02-11)

---

<!-- SECTION: P2-META -->
## 개요

| 항목 | 내용 |
|------|------|
| 목적 | 새 프로젝트의 화면 비율(종횡비) 선택 |
| 진입 경로 | 대시보드(P1) → "새 프로젝트 시작" 또는 템플릿 선택 |
| 하단 네비게이션 | 숨김 |
| 흐름 위치 | 프로젝트 생성 3단계 중 **Step 1** |

### 진입 파라미터

| 파라미터 | 타입 | 필수 | 설명 |
|---------|------|------|------|
| `onNext` | `(ratio: AspectRatio) => void` | O | 다음 단계(P3) 진행 콜백 |
| `onClose` | `() => void` | O | 닫기 → 대시보드(P1) 복귀 콜백 |
| `defaultRatio` | `'16:9' \| '9:16' \| '1:1'` | X | 템플릿 선택 시 해당 비율을 사전 선택 |

### 공유 모드 (Share Mode)

| 조건 | 처리 |
|------|------|
| `isShareMode === true` | P2 화면 **건너뜀** — 바로 P3(미디어 선택)으로 진입 |
| 기본 비율 | 공유 모드 시 `9:16` 자동 적용 |

---

<!-- SECTION: P2-A -->
## A. 헤더

```
┌────────────────────────────────────┐
│  (빈 공간)  화면 비율 선택     ✕   │
└────────────────────────────────────┘
```

| 요소 | 상세 |
|------|------|
| 좌측 빈 공간 | 24px 너비 (레이아웃 대칭 유지용) |
| 페이지 제목 | "화면 비율 선택" 고정 텍스트, 중앙 정렬 |
| ✕ 닫기 버튼 | 원형 40×40px, 아이콘 24×24px |

### ✕ 닫기 버튼 동작

| 항목 | 규칙 |
|------|------|
| 탭 동작 | 대시보드(P1)로 복귀 |
| 상태 초기화 | 선택 상태 모두 초기화 (플로우 재시작) |
| 애니메이션 | whileTap: scale 0.9 |

---

<!-- SECTION: P2-B -->
## B. 안내 텍스트

| 항목 | 규칙 |
|------|------|
| 내용 | "프로젝트에 사용할 화면 비율을 선택하세요" |
| 텍스트 크기 | 14px |
| 정렬 | 좌측 정렬 |
| 하단 여백 | 32px (mb-8) |

---

<!-- SECTION: P2-C -->
## C. 비율 카드 목록

```
┌────────────────────────────────────┐
│ ┌──────────────────────────────┐  │
│ │ ┌────┐  16:9              ○  │  │  비선택 상태
│ │ │    │  유튜브 등 가로 영상    │  │
│ │ └────┘                       │  │
│ └──────────────────────────────┘  │
│ ┌──────────────────────────────┐  │
│ │ ┌──┐   9:16               ✓  │  │  선택 상태 (파란 테두리)
│ │ │  │   쇼츠, 릴스 세로 영상   │  │
│ │ │  │                         │  │
│ │ └──┘                         │  │
│ └──────────────────────────────┘  │
│ ┌──────────────────────────────┐  │
│ │ ┌───┐  1:1                ○  │  │  비선택 상태
│ │ │   │  인스타그램 피드        │  │
│ │ └───┘                        │  │
│ └──────────────────────────────┘  │
└────────────────────────────────────┘
```

### 비율 옵션 데이터

| 비율 | 라벨 | 설명 | 미리보기 아이콘 크기 | 출력 해상도 옵션 |
|------|------|------|-------------------|---------------|
| 16:9 | 16:9 | 유튜브 등 가로 영상 | 80×48px (가로형) | 1280×720, 1920×1080, 3840×2160 |
| 9:16 | 9:16 | 쇼츠, 릴스 등 세로 영상 | 48×80px (세로형) | 720×1280, 1080×1920, 2160×3840 |
| 1:1 | 1:1 | 인스타그램 피드 | 64×64px (정사각) | 720×720, 1080×1080, 2160×2160 |

### 카드 레이아웃

| 요소 | 규칙 |
|------|------|
| 컨테이너 | 세로 배치, 카드 간격 16px (space-y-4) |
| 카드 너비 | 100% (w-full) |
| 카드 패딩 | 24px (p-6) |
| 카드 라운드 | 16px (rounded-2xl) |
| 내부 배치 | 가로 flex — [아이콘] [텍스트] [체크] |
| 아이콘과 텍스트 간격 | 16px (gap-4) |

### 카드 상태

#### 비선택 상태

| 속성 | 값 |
|------|-----|
| 테두리 | 2px solid #E5E7EB (gray-200) |
| 배경 | #FFFFFF (white) |
| 호버 시 테두리 | #D1D5DB (gray-300) |
| 아이콘 색상 | #9CA3AF (gray-400) |
| 우측 표시 | 빈 원형 (border만) |

#### 선택 상태

| 속성 | 값 |
|------|-----|
| 테두리 | 2px solid #3B82F6 (blue-500) |
| 배경 | #EFF6FF (blue-50) |
| 아이콘 색상 | #3B82F6 (blue-500) |
| 우측 표시 | 파란 원형 배경(#3B82F6) + 흰색 체크 아이콘 |
| 체크 아이콘 진입 | scale 0 → 1 애니메이션 |

### 선택 방식

| 항목 | 규칙 |
|------|------|
| 패턴 | 라디오 (단일 선택만 가능) |
| 전환 | 다른 카드 탭 시 기존 선택 해제, 새 카드 선택 |
| 탭 피드백 | whileTap: scale 0.98 |
| 초기 상태 | `defaultRatio` 있으면 해당 카드 선택, 없으면 미선택 |

---

<!-- SECTION: P2-D -->
## D. 다음 버튼

```
┌────────────────────────────────────┐
│  ┌──────────────────────────────┐  │
│  │            다음               │  │
│  └──────────────────────────────┘  │
└────────────────────────────────────┘
```

| 속성 | 값 |
|------|-----|
| 너비 | 100% |
| 높이 | py-4 (패딩 16px 상하) |
| 배경색 | #2D5A3D (golf-green) |
| 텍스트 | "다음", 흰색, 16px, semibold |
| 라운드 | 12px (rounded-xl) |
| 탭 피드백 | whileTap: scale 0.98 |

### 버튼 상태

| 상태 | 조건 | 스타일 |
|------|------|--------|
| 비활성 | 비율 미선택 (`selectedRatio === null`) | opacity 40%, cursor-not-allowed, 탭 불가 |
| 활성 | 비율 선택됨 | opacity 100%, 탭 가능 |

### 탭 시 전달 데이터

P3(미디어 선택)으로 이동할 때 아래 데이터를 전달합니다.

| 데이터 | 값 |
|--------|-----|
| `aspectRatio` | 선택된 비율 (`'16:9'` / `'9:16'` / `'1:1'`) |

---

<!-- SECTION: P2-TEMPLATE -->
## 템플릿에서 진입 시

P1에서 템플릿 카드를 탭하여 진입한 경우:

| 항목 | 규칙 |
|------|------|
| 사전 선택 | `defaultRatio`에 해당하는 카드가 선택 상태로 표시 |
| 변경 가능 | 사용자가 다른 비율로 자유롭게 변경 가능 (강제 아님) |
| 다음 버튼 | 사전 선택이 있으므로 즉시 활성 상태 |

### 템플릿별 기본 비율

| 템플릿 | 기본 비율 |
|--------|----------|
| 하이라이트 릴 | 9:16 |
| 연습 기록 | 16:9 |
| SNS 쇼츠 | 9:16 |
| 분석 영상 | 16:9 |

---

<!-- SECTION: P2-CONSTRAINT -->
## 비율 변경 제약

| 항목 | 규칙 |
|------|------|
| 프로젝트 생성 후 | 비율 변경 **불가** |
| 확정 시점 | 프로젝트 생성 시 (P3 → P4 완료 후) |
| 에디터(P5)에서 | 비율 변경 UI 없음 |
| 사용자 안내 | 별도 안내하지 않음 (권장: "비율은 나중에 변경할 수 없습니다" 텍스트 추가) |

---

<!-- SECTION: P2-FLOW -->
## 화면 흐름

### 진입 경로

| 경로 | 설명 | defaultRatio |
|------|------|-------------|
| 새 프로젝트 시작 | P1 빠른시작 D-1 탭 | 없음 (null) |
| 템플릿 선택 | P1 추천 템플릿 카드 탭 | 템플릿의 aspectRatio |
| 공유 모드 | P1 영상 업로드 버튼 | **P2 건너뜀** → P3 직행 |

### 이탈 경로

| 경로 | 동작 | 이후 화면 |
|------|------|----------|
| ✕ 닫기 | `onClose()` 호출 | 대시보드(P1) |
| 다음 버튼 | `onNext(selectedRatio)` 호출 | 미디어 선택(P3) |

### 전체 프로젝트 생성 흐름에서의 위치

```
[대시보드 P1]
  ├─ 새 프로젝트 ──▶ [P2 비율 선택] ──▶ [P3 미디어 선택] ──▶ [P4 AI 처리] ──▶ [P5 에디터]
  ├─ 템플릿 선택 ──▶ [P2 비율 선택(사전선택)] ──▶ [P3] ──▶ [P4] ──▶ [P5]
  └─ 영상 업로드 ──▶ (P2 건너뜀) ──▶ [P3 미디어 선택] ──▶ [P4] ──▶ [P5]
```

---

<!-- SECTION: P2-STATE -->
## 상태 관리

### 컴포넌트 로컬 상태

| 상태 | 타입 | 초기값 | 설명 |
|------|------|--------|------|
| `selectedRatio` | `AspectRatio \| null` | `defaultRatio \|\| null` | 현재 선택된 비율 |

### 타입 정의

```typescript
type AspectRatio = '16:9' | '9:16' | '1:1';
```

---

<!-- SECTION: P2-ANIMATION -->
## 애니메이션

| 요소 | 애니메이션 | 상세 |
|------|----------|------|
| 카드 탭 | whileTap | scale: 0.98 |
| 닫기 버튼 탭 | whileTap | scale: 0.9 |
| 다음 버튼 탭 | whileTap | scale: 0.98 |
| 체크 아이콘 등장 | scale-in | initial: scale(0) → animate: scale(1) |
| 페이지 전환 (부모 레벨) | slide-in | initial: {opacity:0, x:-20} → animate: {opacity:1, x:0} |
